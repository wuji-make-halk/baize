var g2f=function(){function e(t,a){var n=document.createElement("script");n.type="text/javascript",n.onload=function(){a()},n.onerror=function(){n.parentNode.removeChild(n),setTimeout(function(){e(t,a)},1e3)},n.src=t,document.getElementsByTagName("head")[0].appendChild(n)}var t,a,n,r,o,s,i,c,d,p,E,R,u,g,O=navigator.userAgent,f=(O.indexOf("Android")>-1,O.indexOf("iPhone")>-1||O.indexOf("iPad")>-1),_={SHOWRECHARGE:"msg_recharge",GETORDERNO:"msg_get_order_no",RETURNORDERNO:"mgs_ret_order_no",RECHARGE_CALLBACK:"msg_recharge_cb",SET_SHARE:"msg_share_init",INIT:"msg_init",SHOWQRCODE:"msg_qr",SHARE_CALLBACK:"msg_share_cb",REPORTDATA:"msg_report",SENDTODESKTOP:"msg_send_desktop",SENDTODESKTOP_CALLBACK:"msg_send_desktop_cb",FOCUS_GETSTATE:"msg_get_foucus",FOCUS_RETURNSTATE:"msg_ret_focus",RECHARGE_PAY:"msg_pay",CHECKSHARE:"msg_check",RETURNSHARE:"msg_ret_share",INIT_CALLBACK:"msg_init_cb",ON_LOGINERROR:"msg_error",CHECKDOWNLOAD:"msg_check_download",RETURNDOWNLOAD:"msg_download",WEIBO_SHARE:"msg_weibo_share"},l=function(e){for(var t=location.search,a=t.substr(1,t.length-1).split("&"),n=0;n<a.length;n++)if(a[n].split("=")[0]==e)return a[n].split("=")[1]},T=function(){var e=location.search,t={};if(!e.length)return t;for(var a=e.substr(1,e.length-1).split("&"),n=0;n<a.length;n++)t[a[n].split("=")[0]]=a[n].split("=")[1];return t},m=function(e,t){var a={};a.identify="g2460",a.msg=e,t&&(a.data=t);try{parent.window.postMessage(a,"*")}catch(n){}},A=function(e,t){var a=document.createElement("div");a.id="toast",a.style.width="260px",a.style.height="130px",a.style.margin="auto",a.style.position="absolute",a.style.top="0",a.style.bottom="0",a.style.right="0",a.style.left="0",a.innerText=e,a.classList.add("toast");var n=document.getElementById("gbox")||document.body;n.appendChild(a),setTimeout(function(){n.removeChild(a)},t||1e3)},h=function(e){if("object"==typeof e){for(var t="?",a=Object.keys(e),n=0;n<a.length;n++)t+=0==n?a[n]+"="+e[a[n]]:"&"+(a[n]+"="+e[a[n]]);return t}},S=function(e,t,a,n){var a=a||{},r=a.type||"get",o=a.data||null;try{var s=new XMLHttpRequest;if(s.open(r,e,!0),s.onreadystatechange=function(){if(4==s.readyState){var a=JSON.parse(s.responseText);if(a.c<0)return void toastMsg(a.m);if("error"==s.responseText)return void alert("\u8bf7\u6c42"+e+"\u8fd4\u56deerror");t&&t(a)}},n)try{s.setRequestHeader("Content-Type",n)}catch(i){alert(i)}s.send(o)}catch(i){return!1}},C=function(){window.addEventListener("message",function(e){var t=e.data;if(t.identify&&"g2460"==t.identify)switch(t.msg){case _.GETORDERNO:var a=s(t.data);m(_.RETURNORDERNO,{orderData:a,amount:t.data.amount,id:t.data.id});break;case _.RECHARGE_CALLBACK:i(t.data);break;case _.SHARE_CALLBACK:try{c(t.data)}catch(e){alert(e)}break;case _.SENDTODESKTOP_CALLBACK:d(t.data);break;case _.FOCUS_RETURNSTATE:p(t.data);break;case _.RETURNSHARE:R(t.data);break;case _.RETURNDOWNLOAD:g(t.data);break;case _.INIT_CALLBACK:E(t.data)}})},N=function(e,s,i,c){if(!u){if(e){this.appid=e;T();t=c?"//"+location.host+"/index.php":"//h5sdk.zytxgame.com/index.php",S(t+"/api/getAppInfo?appId="+e,function(t){var d=t.d;0!=t.c&&A("getAppInfo\u9519\u8bef"),d.test=c,d.appid=e,d.shareInfo=i,d.server_id=l("_game"),E=s,m(_.INIT,d);try{var p=d[Object.keys(d)[0]];n=JSON.parse(p).passType,a=JSON.parse(p).loginUrl,o=JSON.parse(p).gameId||JSON.parse(p).browserId||JSON.parse(p).gKey,r=Object.keys(d)[0]}catch(R){alert(R)}})}else;u=!0,C()}},y=function(){m(_.ON_LOGINERROR,a)},D=function(){return this.passType},b=function(e,t,a){m(_.SHOWRECHARGE,e),s=t,i=a},v=function(e,t,a){s=a;var n=s({amount:t,id:e});m(_.RETURNORDERNO,{orderData:n,amount:t})},L=function(e,t,a){m(_.RECHARGE_PAY,{orderData:t,amount:e}),i=a},H=function(){m(_.QQBROSER_TOPIC)},I=function(e){m(_.QQBROSER_LOGOUT,e)},K=function(e){m(_.SENDTODESKTOP),d=e},w=function(e){m(_.REPORTDATA,e)},k=function(){m(_.SHOWQRCODE)},U=function(){m(_.SET_SHARE)},B=function(e){m(_.WEIBO_SHARE,e)},G=function(e,t){var a=e.openId,n=e.openKey,r=e.appId;p=t,m(_.FOCUS_GETSTATE,{openId:a,openKey:n,appId:r})},P=function(e){c=e},x=function(e){m(_.CHECKSHARE),R=e},W=function(e){m(_.CHECKDOWNLOAD),g=e},Q=function(){};return{init:N,getParameters:T,getParameter:l,object2Search:h,getDataXHR:S,postMsg:m,showRecharge:b,initMessageListener:C,loadScript:e,isIos:f,passType:D,onloginerror:y,showQrCode:k,getFocusState:G,setShareCallback:P,reportData:w,sendToDesktop:K,qqborwserLogout:I,openTopicCircle:H,pay:L,isOpenShare:x,charge:v,showShare:U,isDownloadable:W,downloadApp:Q,weiboShare:B}}();